---
title: 文件上传下载功能
---

__文件上传下载，主要分为 文件本地管理 和 文件中心服务器__

##文件本地管理

> 任何允许文件上传的 服务器，都必须 启动 文件本地管理模块。

文件信息，与 域信息关联密切。域之间 相互隔离。

任意用户上传符合规范的文件之后，会 在当前容器的 文件本地管理中，找到 对应的域，并 保存一条关键记录。比如：上传时间，文件大小，文件所在位置，下载次数，是否允许下载等等。



之后，会 给 文件中心服务器 发一条通知 ，某某域 ，在 某某 容器，保存某一个文件。



某些 域 可能 同时存在于多个 容器中，当 下载文件的请求， 被 发送给 并没有 保存文件的 容器时。当前 容器 去 文件中心，获取 当前 域 的对应文件 保存所在地，并 保存到 本地文件管理中。然后 进行请求转发 到 对应的容器下载文件。



## 文件中心服务器

> 文件中心服务器，只 保存 文件 的 保存记录。并不保存任何文件。

任意 一 容器 在接收到文件上传时，必须 给 文件中心发送 一条关键信息，域标识，容器名称，文件名称 等等 信息。文件 中心服务器 统一进行管理。

当 域用户 的下载 文件请求，被 转发到 没有 对应文件 的容器时，容器 会从 中心服务器 获取 文件保存信息，之后，容器进行请求转发，提供用户下载文件。